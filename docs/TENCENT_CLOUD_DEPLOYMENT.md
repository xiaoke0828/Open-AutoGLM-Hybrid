# è…¾è®¯äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨åœ¨è…¾è®¯äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½² Open-AutoGLMï¼Œå®žçŽ°è¿œç¨‹æŽ§åˆ¶ Android æ‰‹æœºçš„åŠŸèƒ½ã€‚

**é€‚ç”¨åœºæ™¯**ï¼š
- éœ€è¦ 24/7 ä¸é—´æ–­è¿è¡Œçš„è‡ªåŠ¨åŒ–ä»»åŠ¡
- å¤šå°æ‰‹æœºçš„é›†ä¸­ç®¡ç†
- è¿œç¨‹è®¿é—®å’ŒæŽ§åˆ¶
- é«˜æ€§èƒ½ AI æŽ¨ç†

**æŽ¨èé…ç½®**ï¼š
- æœåŠ¡å™¨ï¼šè…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ 2æ ¸4Gï¼ˆçº¦ Â¥40/æœˆï¼‰
- ç³»ç»Ÿï¼šUbuntu 22.04 LTS
- å¸¦å®½ï¼šæŒ‰éœ€é€‰æ‹©ï¼ˆå»ºè®® â‰¥5Mbpsï¼‰

---

## ç›®å½•

1. [è´­ä¹°å’Œé…ç½®è…¾è®¯äº‘æœåŠ¡å™¨](#1-è´­ä¹°å’Œé…ç½®è…¾è®¯äº‘æœåŠ¡å™¨)
2. [è¿žæŽ¥æœåŠ¡å™¨](#2-è¿žæŽ¥æœåŠ¡å™¨)
3. [é…ç½®æœåŠ¡å™¨çŽ¯å¢ƒ](#3-é…ç½®æœåŠ¡å™¨çŽ¯å¢ƒ)
4. [éƒ¨ç½² Open-AutoGLM](#4-éƒ¨ç½²-open-autoglm)
5. [é…ç½®æ‰‹æœºè¿žæŽ¥](#5-é…ç½®æ‰‹æœºè¿žæŽ¥)
6. [æµ‹è¯•éƒ¨ç½²](#6-æµ‹è¯•éƒ¨ç½²)
7. [é…ç½®å¼€æœºè‡ªå¯ï¼ˆå¯é€‰ï¼‰](#7-é…ç½®å¼€æœºè‡ªå¯å¯é€‰)
8. [é…ç½®å…¬ç½‘è®¿é—®ï¼ˆå¯é€‰ï¼‰](#8-é…ç½®å…¬ç½‘è®¿é—®å¯é€‰)
9. [æ•…éšœæŽ’é™¤](#9-æ•…éšœæŽ’é™¤)

---

## 1. è´­ä¹°å’Œé…ç½®è…¾è®¯äº‘æœåŠ¡å™¨

### æ­¥éª¤ 1.1ï¼šç™»å½•è…¾è®¯äº‘æŽ§åˆ¶å°

1. è®¿é—® [è…¾è®¯äº‘å®˜ç½‘](https://cloud.tencent.com/)
2. ç™»å½•æ‚¨çš„è…¾è®¯äº‘è´¦å·
3. è¿›å…¥ [è½»é‡åº”ç”¨æœåŠ¡å™¨æŽ§åˆ¶å°](https://console.cloud.tencent.com/lighthouse/instance/index)

### æ­¥éª¤ 1.2ï¼šè´­ä¹°æœåŠ¡å™¨

1. ç‚¹å‡» **æ–°å»º** æŒ‰é’®
2. é€‰æ‹©é…ç½®ï¼š
   - **åœ°åŸŸ**ï¼šé€‰æ‹©è·ç¦»æ‚¨æœ€è¿‘çš„åœ°åŸŸï¼ˆå¦‚å¹¿å·žã€ä¸Šæµ·ã€åŒ—äº¬ï¼‰
   - **é•œåƒ**ï¼šé€‰æ‹© `Ubuntu 22.04 LTS`
   - **å®žä¾‹å¥—é¤**ï¼šæŽ¨è `2æ ¸4GB` æˆ–æ›´é«˜
   - **è´­ä¹°æ—¶é•¿**ï¼šæŒ‰éœ€é€‰æ‹©
3. è®¾ç½®å®žä¾‹åç§°ï¼šå¦‚ `AutoGLM-Server`
4. ç¡®è®¤è®¢å•å¹¶æ”¯ä»˜

### æ­¥éª¤ 1.3ï¼šé…ç½®é˜²ç«å¢™è§„åˆ™

**é‡è¦**ï¼šå¿…é¡»å¼€æ”¾å¿…è¦çš„ç«¯å£ï¼Œå¦åˆ™æ— æ³•è®¿é—®æœåŠ¡å™¨ã€‚

1. åœ¨æœåŠ¡å™¨åˆ—è¡¨ä¸­ï¼Œç‚¹å‡»æ‚¨çš„æœåŠ¡å™¨è¿›å…¥è¯¦æƒ…é¡µ
2. è¿›å…¥ **é˜²ç«å¢™** æ ‡ç­¾é¡µ
3. ç‚¹å‡» **æ·»åŠ è§„åˆ™**ï¼Œæ·»åŠ ä»¥ä¸‹è§„åˆ™ï¼š

| åº”ç”¨ç±»åž‹ | åè®® | ç«¯å£ | æ¥æº | ç­–ç•¥ | è¯´æ˜Ž |
|---------|------|------|------|------|------|
| è‡ªå®šä¹‰ | TCP | 22 | 0.0.0.0/0 | å…è®¸ | SSH ç™»å½• |
| è‡ªå®šä¹‰ | TCP | 8000 | 0.0.0.0/0 | å…è®¸ | Web ç•Œé¢ï¼ˆå¯é€‰ï¼‰ |
| è‡ªå®šä¹‰ | TCP | 7000 | 0.0.0.0/0 | å…è®¸ | frp æœåŠ¡ç«¯ï¼ˆå¯é€‰ï¼‰ |

**å®‰å…¨å»ºè®®**ï¼š
- å¦‚æžœåªéœ€è¦è‡ªå·±è®¿é—®ï¼Œå°†æ¥æºæ”¹ä¸º `æ‚¨çš„IP/32`ï¼ˆæ›´å®‰å…¨ï¼‰
- éƒ¨ç½²å®ŒæˆåŽå¯ä»¥éšæ—¶è°ƒæ•´é˜²ç«å¢™è§„åˆ™

### æ­¥éª¤ 1.4ï¼šé‡ç½®æˆ–è®¾ç½®å¯†ç 

1. åœ¨æœåŠ¡å™¨è¯¦æƒ…é¡µï¼Œç‚¹å‡» **é‡ç½®å¯†ç **
2. è®¾ç½®ä¸€ä¸ªå¼ºå¯†ç ï¼ˆå»ºè®®ä½¿ç”¨å¯†ç ç®¡ç†å™¨ç”Ÿæˆï¼‰
3. ç¡®è®¤å¹¶è®°å½•å¯†ç ï¼ˆåŽç»­ SSH ç™»å½•éœ€è¦ï¼‰

---

## 2. è¿žæŽ¥æœåŠ¡å™¨

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è…¾è®¯äº‘ç½‘é¡µç»ˆç«¯ï¼ˆæŽ¨èæ–°æ‰‹ï¼‰

1. åœ¨æœåŠ¡å™¨åˆ—è¡¨ä¸­ï¼Œç‚¹å‡»æœåŠ¡å™¨å³ä¾§çš„ **ç™»å½•** æŒ‰é’®
2. é€‰æ‹© **ä½¿ç”¨ WebShell ç™»å½•**
3. è¾“å…¥ç”¨æˆ·å `ubuntu` å’Œå¯†ç 
4. æˆåŠŸç™»å½•åŽï¼Œæ‚¨å°†çœ‹åˆ°å‘½ä»¤è¡Œç•Œé¢

### æ–¹æ³•äºŒï¼šä½¿ç”¨æœ¬åœ° SSH å®¢æˆ·ç«¯ï¼ˆæŽ¨èï¼‰

**macOS/Linux**ï¼š
```bash
# èŽ·å–æœåŠ¡å™¨å…¬ç½‘ IPï¼ˆåœ¨æœåŠ¡å™¨è¯¦æƒ…é¡µæŸ¥çœ‹ï¼‰
# æ›¿æ¢ä¸ºæ‚¨çš„å®žé™… IP
ssh ubuntu@YOUR_SERVER_IP

# é¦–æ¬¡è¿žæŽ¥ä¼šæç¤ºï¼šAre you sure you want to continue connecting (yes/no)?
# è¾“å…¥ yes å¹¶å›žè½¦
# ç„¶åŽè¾“å…¥å¯†ç 
```

**Windows**ï¼š
- ä½¿ç”¨ [PuTTY](https://www.putty.org/) æˆ– [MobaXterm](https://mobaxterm.mobatek.net/)
- ä¸»æœºåï¼šå¡«å…¥æœåŠ¡å™¨å…¬ç½‘ IP
- ç«¯å£ï¼š22
- ç”¨æˆ·åï¼šubuntu
- å¯†ç ï¼šæ‚¨è®¾ç½®çš„å¯†ç 

---

## 3. é…ç½®æœåŠ¡å™¨çŽ¯å¢ƒ

### æ­¥éª¤ 3.1ï¼šæ›´æ–°ç³»ç»Ÿ

```bash
# æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨
sudo apt update

# å‡çº§å·²å®‰è£…çš„è½¯ä»¶åŒ…ï¼ˆå¯é€‰ï¼Œä½†æŽ¨èï¼‰
sudo apt upgrade -y
```

### æ­¥éª¤ 3.2ï¼šå®‰è£…å¿…è¦è½¯ä»¶

```bash
# å®‰è£… Gitã€Python3ã€pip ç­‰åŸºç¡€å·¥å…·
sudo apt install -y git python3 python3-pip python3-venv curl wget

# éªŒè¯å®‰è£…
python3 --version  # åº”æ˜¾ç¤º Python 3.10.x æˆ–æ›´é«˜
git --version      # åº”æ˜¾ç¤º git ç‰ˆæœ¬
```

### æ­¥éª¤ 3.3ï¼šé…ç½®æ—¶åŒºï¼ˆå¯é€‰ï¼‰

```bash
# æŸ¥çœ‹å½“å‰æ—¶åŒº
timedatectl

# è®¾ç½®ä¸ºä¸­å›½æ—¶åŒº
sudo timedatectl set-timezone Asia/Shanghai

# éªŒè¯
date  # åº”æ˜¾ç¤ºåŒ—äº¬æ—¶é—´
```

### æ­¥éª¤ 3.4ï¼šåˆ›å»ºå·¥ä½œç›®å½•

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir -p ~/autoglm-server
cd ~/autoglm-server
```

---

## 4. éƒ¨ç½² Open-AutoGLM

### æ­¥éª¤ 4.1ï¼šå…‹éš†é¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®åˆ°æœåŠ¡å™¨
git clone https://github.com/xiaoke0828/Open-AutoGLM-Hybrid.git
cd Open-AutoGLM-Hybrid

# æŸ¥çœ‹é¡¹ç›®ç»“æž„
ls -lh
```

### æ­¥éª¤ 4.2ï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬ï¼ˆè‡ªåŠ¨åŒ–ï¼‰

æˆ‘ä»¬æä¾›äº†è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼Œç±»ä¼¼äºŽ Mac æœåŠ¡å™¨æ–¹æ¡ˆï¼š

```bash
# è¿›å…¥ mac-server ç›®å½•ï¼ˆè…¾è®¯äº‘æœåŠ¡å™¨ä¹Ÿä½¿ç”¨æ­¤è„šæœ¬ï¼‰
cd mac-server

# è¿è¡Œéƒ¨ç½²è„šæœ¬
bash deploy-mac.sh
```

**éƒ¨ç½²è¿‡ç¨‹è¯´æ˜Ž**ï¼š
- âœ… è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿï¼ˆUbuntu è€Œéž macOSï¼Œä½†å…¼å®¹ï¼‰
- âœ… å®‰è£… Python è™šæ‹ŸçŽ¯å¢ƒå’Œä¾èµ–ï¼ˆpillowã€requestsï¼‰
- âœ… å…‹éš† Open-AutoGLM é¡¹ç›®
- âœ… è‡ªåŠ¨æ£€æµ‹æ‰‹æœº IPï¼ˆTailscale æˆ–å±€åŸŸç½‘ï¼‰
- âœ… ç”Ÿæˆé…ç½®æ–‡ä»¶ `config.env`

**æ³¨æ„**ï¼š
- éƒ¨ç½²è„šæœ¬ä¼šæç¤ºæ£€æµ‹åˆ°éž macOS ç³»ç»Ÿï¼Œä½†ä¼šç»§ç»­æ‰§è¡Œï¼ˆå…¼å®¹ Linuxï¼‰
- å¦‚æžœè‡ªåŠ¨æ£€æµ‹æ‰‹æœº IP å¤±è´¥ï¼Œéœ€è¦æ‰‹åŠ¨è¾“å…¥ï¼ˆè§ä¸‹ä¸€æ­¥ï¼‰

### æ­¥éª¤ 4.3ï¼šé…ç½® API Key å’Œæ‰‹æœº IP

éƒ¨ç½²å®ŒæˆåŽï¼Œéœ€è¦ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š

```bash
# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano ~/autoglm-server/config.env
```

ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š

```bash
# GRS AI API Keyï¼ˆå¿…å¡«ï¼‰
export PHONE_AGENT_API_KEY="your_api_key_here"  # â† æ›¿æ¢ä¸ºæ‚¨çš„å®žé™… API Key

# æ‰‹æœº AutoGLM Helper åœ°å€
# å¦‚æžœä½¿ç”¨ Tailscaleï¼ˆæŽ¨èï¼‰
export PHONE_HELPER_URL="http://100.64.0.2:8080"  # â† æ›¿æ¢ä¸ºæ‰‹æœºçš„ Tailscale IP

# å¦‚æžœä½¿ç”¨å…¬ç½‘ï¼ˆéœ€è¦é…ç½®ç«¯å£è½¬å‘æˆ– frpï¼‰
# export PHONE_HELPER_URL="http://YOUR_PHONE_PUBLIC_IP:8080"

# æ—¥å¿—çº§åˆ«
export LOG_LEVEL="INFO"
```

**ä¿å­˜æ–‡ä»¶**ï¼š
- æŒ‰ `Ctrl + O` ä¿å­˜
- æŒ‰ `Ctrl + X` é€€å‡º

**èŽ·å– API Key**ï¼š
- å¦‚æžœä½¿ç”¨ GRS AIï¼šç™»å½• [GRS AI å®˜ç½‘](https://grsai.com/) â†’ API ç®¡ç† â†’ åˆ›å»º API Key
- å¦‚æžœä½¿ç”¨å…¶ä»–æœåŠ¡ï¼ˆå¦‚ OpenAIï¼‰ï¼šä¿®æ”¹ `PHONE_AGENT_BASE_URL`

---

## 5. é…ç½®æ‰‹æœºè¿žæŽ¥

### æ–¹æ¡ˆ Aï¼šä½¿ç”¨ Tailscaleï¼ˆæŽ¨èï¼Œæœ€ç®€å•ï¼‰

**ä¸ºä»€ä¹ˆæŽ¨è Tailscaleï¼Ÿ**
- âœ… æ— éœ€å…¬ç½‘ IP
- âœ… æ— éœ€é…ç½®é˜²ç«å¢™å’Œç«¯å£è½¬å‘
- âœ… ç‚¹å¯¹ç‚¹åŠ å¯†ï¼Œå®‰å…¨å¯é 
- âœ… è·¨å¹³å°æ”¯æŒï¼ˆæ‰‹æœºã€æœåŠ¡å™¨ã€ç”µè„‘ï¼‰

**æ­¥éª¤ 5.A.1ï¼šåœ¨æ‰‹æœºä¸Šå®‰è£… Tailscale**

1. åœ¨æ‰‹æœºä¸Šå®‰è£… [Tailscale å®¢æˆ·ç«¯](https://tailscale.com/download)
   - Androidï¼šä»Ž Google Play æˆ– [F-Droid](https://f-droid.org/) ä¸‹è½½
   - iOSï¼šä»Ž App Store ä¸‹è½½

2. æ‰“å¼€ Tailscaleï¼Œä½¿ç”¨ Google/GitHub/Email ç™»å½•

3. å…è®¸ VPN æƒé™

4. è®°å½•æ‰‹æœºçš„ Tailscale IPï¼ˆé€šå¸¸æ˜¯ `100.64.0.x` æˆ– `100.x.x.x`ï¼‰
   - åœ¨ Tailscale APP ä¸­æŸ¥çœ‹

**æ­¥éª¤ 5.A.2ï¼šåœ¨æœåŠ¡å™¨ä¸Šå®‰è£… Tailscale**

```bash
# å®‰è£… Tailscale
curl -fsSL https://tailscale.com/install.sh | sh

# å¯åŠ¨ Tailscale å¹¶ç™»å½•
sudo tailscale up

# ç»ˆç«¯ä¼šæ˜¾ç¤ºä¸€ä¸ª URLï¼Œå¤åˆ¶åˆ°æµè§ˆå™¨æ‰“å¼€å¹¶æŽˆæƒ
# æŽˆæƒå®ŒæˆåŽï¼Œè¿”å›žç»ˆç«¯

# æŸ¥çœ‹ Tailscale çŠ¶æ€
tailscale status

# æ‚¨åº”è¯¥çœ‹åˆ°æ‰‹æœºè®¾å¤‡å·²åˆ—å‡º
```

**æ­¥éª¤ 5.A.3ï¼šæµ‹è¯•è¿žæŽ¥**

```bash
# æµ‹è¯• ping æ‰‹æœºï¼ˆæ›¿æ¢ä¸ºæ‚¨çš„æ‰‹æœº Tailscale IPï¼‰
ping 100.64.0.2

# æµ‹è¯• AutoGLM Helper è¿žæŽ¥
curl http://100.64.0.2:8080/status

# é¢„æœŸè¾“å‡ºï¼š{"status":"ok","accessibility_enabled":true}
```

**æ­¥éª¤ 5.A.4ï¼šæ›´æ–°é…ç½®æ–‡ä»¶**

```bash
nano ~/autoglm-server/config.env

# ä¿®æ”¹ PHONE_HELPER_URL
export PHONE_HELPER_URL="http://100.64.0.2:8080"  # æ›¿æ¢ä¸ºå®žé™… IP
```

---

### æ–¹æ¡ˆ Bï¼šä½¿ç”¨ frp å†…ç½‘ç©¿é€ï¼ˆé€‚ç”¨äºŽæ—  Tailscaleï¼‰

å¦‚æžœæ— æ³•ä½¿ç”¨ Tailscaleï¼Œå¯ä»¥ä½¿ç”¨ frp å°†æ‰‹æœºç«¯å£æ˜ å°„åˆ°æœåŠ¡å™¨å…¬ç½‘ IPã€‚

**æž¶æž„**ï¼š
```
æ‰‹æœº (localhost:8080) â†’ frp å®¢æˆ·ç«¯ (Termux)
                          â†“
                    frp æœåŠ¡ç«¯ (è…¾è®¯äº‘) â†’ å…¬ç½‘ IP:7080
```

**è¯¦ç»†æ­¥éª¤**ï¼šå‚è€ƒ [FRP_WEB_DEPLOYMENT.md](FRP_WEB_DEPLOYMENT.md)

**å¿«é€Ÿé…ç½®**ï¼š

1. åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… frp æœåŠ¡ç«¯ï¼š

```bash
cd ~/autoglm-server
wget https://github.com/fatedier/frp/releases/download/v0.52.3/frp_0.52.3_linux_amd64.tar.gz
tar -xzf frp_0.52.3_linux_amd64.tar.gz
cd frp_0.52.3_linux_amd64

# é…ç½® frps.toml
cat > frps.toml << 'EOF'
bindPort = 7000
EOF

# å¯åŠ¨ frp æœåŠ¡ç«¯
./frps -c frps.toml &
```

2. åœ¨æ‰‹æœº Termux ä¸­å®‰è£… frp å®¢æˆ·ç«¯ï¼š

```bash
# åœ¨ Termux ä¸­
pkg install wget
wget https://github.com/fatedier/frp/releases/download/v0.52.3/frp_0.52.3_linux_arm64.tar.gz
tar -xzf frp_0.52.3_linux_arm64.tar.gz
cd frp_0.52.3_linux_arm64

# é…ç½® frpc.tomlï¼ˆæ›¿æ¢ YOUR_SERVER_IPï¼‰
cat > frpc.toml << 'EOF'
serverAddr = "YOUR_SERVER_IP"
serverPort = 7000

[[proxies]]
name = "autoglm-helper"
type = "tcp"
localIP = "127.0.0.1"
localPort = 8080
remotePort = 7080
EOF

# å¯åŠ¨ frp å®¢æˆ·ç«¯
./frpc -c frpc.toml &
```

3. æ›´æ–°æœåŠ¡å™¨é…ç½®ï¼š

```bash
nano ~/autoglm-server/config.env

# ä½¿ç”¨ localhostï¼ˆå› ä¸º frp æ˜ å°„åˆ°æœ¬åœ°ï¼‰
export PHONE_HELPER_URL="http://localhost:7080"
```

---

## 6. æµ‹è¯•éƒ¨ç½²

### æ­¥éª¤ 6.1ï¼šå¯åŠ¨æœåŠ¡

```bash
cd ~/autoglm-server

# å¯åŠ¨æœåŠ¡ï¼ˆä½¿ç”¨å¢žå¼ºç‰ˆå¯åŠ¨è„šæœ¬ï¼‰
./start-server.sh
```

**é¢„æœŸè¾“å‡º**ï¼š
```
[ä¿¡æ¯] æ­£åœ¨å¯åŠ¨ Open-AutoGLM Mac æœåŠ¡å™¨...

[ä¿¡æ¯] åŠ è½½é…ç½®æ–‡ä»¶...
[ä¿¡æ¯] æµ‹è¯•æ‰‹æœºè¿žæŽ¥: http://100.64.0.2:8080
[æˆåŠŸ] æ‰‹æœºå·²è¿žæŽ¥ï¼ˆæ— éšœç¢æ¨¡å¼ï¼‰

[æˆåŠŸ] å‰ç½®æ£€æŸ¥é€šè¿‡

[ä¿¡æ¯] å¯åŠ¨ Open-AutoGLM...
é…ç½®ä¿¡æ¯:
  - æ‰‹æœºåœ°å€: http://100.64.0.2:8080
  - API åŸºç¡€ URL: https://api.grsai.com/v1
  - æ—¥å¿—çº§åˆ«: INFO

Open-AutoGLM å·²å¯åŠ¨ï¼
```

### æ­¥éª¤ 6.2ï¼šæµ‹è¯•åŸºç¡€åŠŸèƒ½

**æ–¹æ³• 1ï¼šå‘½ä»¤è¡Œæµ‹è¯•**ï¼ˆæŽ¨èï¼‰

åœ¨å¦ä¸€ä¸ª SSH ç»ˆç«¯ä¸­ï¼š

```bash
# æµ‹è¯•æ‰‹æœºè¿žæŽ¥
curl http://YOUR_PHONE_IP:8080/status

# æµ‹è¯•æˆªå›¾
curl http://YOUR_PHONE_IP:8080/screenshot | jq '.success'

# æµ‹è¯•ç‚¹å‡»ï¼ˆä¸ä¼šå®žé™…æ‰§è¡Œï¼Œåªæ˜¯éªŒè¯è¿žæŽ¥ï¼‰
curl -X POST http://YOUR_PHONE_IP:8080/tap \
  -H "Content-Type: application/json" \
  -d '{"x": 500, "y": 500}'
```

**æ–¹æ³• 2ï¼šé€šè¿‡ Open-AutoGLM CLI**ï¼ˆå®Œæ•´æµ‹è¯•ï¼‰

åœ¨ Open-AutoGLM å¯åŠ¨çš„ç»ˆç«¯ä¸­ï¼Œè¾“å…¥ä»»åŠ¡ï¼š

```
> å¸®æˆ‘æ‰“å¼€æ·˜å®
```

å¦‚æžœä¸€åˆ‡æ­£å¸¸ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ï¼š
1. AI åˆ†æžä»»åŠ¡
2. æ‰‹æœºè‡ªåŠ¨æ‰§è¡Œæ“ä½œï¼ˆæ‰“å¼€æ·˜å® APPï¼‰
3. è¿”å›žæ‰§è¡Œç»“æžœ

### æ­¥éª¤ 6.3ï¼šéªŒè¯éƒ¨ç½²æˆåŠŸ

âœ… **éƒ¨ç½²æˆåŠŸçš„æ ‡å¿—**ï¼š
- å¯åŠ¨è„šæœ¬æ— é”™è¯¯è¾“å‡º
- æ‰‹æœºè¿žæŽ¥éªŒè¯é€šè¿‡
- èƒ½å¤ŸæŽ¥æ”¶å’Œæ‰§è¡Œä»»åŠ¡
- æ‰‹æœºå±å¹•æ˜¾ç¤ºç›¸åº”æ“ä½œ

âŒ **å¦‚æžœé‡åˆ°é—®é¢˜**ï¼š
- æŸ¥çœ‹é”™è¯¯æç¤ºï¼ˆå¯åŠ¨è„šæœ¬ä¼šç»™å‡ºè¯¦ç»†çš„æ•…éšœæŽ’é™¤æŒ‡å¼•ï¼‰
- æ£€æŸ¥é…ç½®æ–‡ä»¶ï¼ˆAPI Keyã€æ‰‹æœº IPï¼‰
- æ£€æŸ¥æ‰‹æœºä¸Šçš„ AutoGLM Helper æ˜¯å¦è¿è¡Œ
- æ£€æŸ¥æ— éšœç¢æœåŠ¡æ˜¯å¦å¼€å¯
- å‚è€ƒä¸‹æ–¹çš„ [æ•…éšœæŽ’é™¤](#9-æ•…éšœæŽ’é™¤) ç« èŠ‚

---

## 7. é…ç½®å¼€æœºè‡ªå¯ï¼ˆå¯é€‰ï¼‰

### æ­¥éª¤ 7.1ï¼šåˆ›å»º systemd æœåŠ¡

```bash
# åˆ›å»ºæœåŠ¡æ–‡ä»¶
sudo nano /etc/systemd/system/autoglm.service
```

å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š

```ini
[Unit]
Description=Open-AutoGLM Service
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/home/ubuntu/autoglm-server
ExecStart=/home/ubuntu/autoglm-server/start-server.sh
Restart=on-failure
RestartSec=10
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
```

**ä¿å­˜æ–‡ä»¶**ï¼š
- æŒ‰ `Ctrl + O` ä¿å­˜
- æŒ‰ `Ctrl + X` é€€å‡º

### æ­¥éª¤ 7.2ï¼šå¯ç”¨å’Œå¯åŠ¨æœåŠ¡

```bash
# é‡æ–°åŠ è½½ systemd é…ç½®
sudo systemctl daemon-reload

# å¯ç”¨å¼€æœºè‡ªå¯
sudo systemctl enable autoglm.service

# å¯åŠ¨æœåŠ¡
sudo systemctl start autoglm.service

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status autoglm.service
```

### æ­¥éª¤ 7.3ï¼šç®¡ç†æœåŠ¡

```bash
# åœæ­¢æœåŠ¡
sudo systemctl stop autoglm.service

# é‡å¯æœåŠ¡
sudo systemctl restart autoglm.service

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u autoglm.service -f
```

---

## 8. é…ç½®å…¬ç½‘è®¿é—®ï¼ˆå¯é€‰ï¼‰

å¦‚æžœéœ€è¦é€šè¿‡æµè§ˆå™¨è®¿é—® Web ç•Œé¢ï¼Œå¯ä»¥éƒ¨ç½² Web æœåŠ¡å™¨ã€‚

### æ­¥éª¤ 8.1ï¼šéƒ¨ç½² Web ç•Œé¢

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd ~/autoglm-server/Open-AutoGLM-Hybrid

# å®‰è£… Web æœåŠ¡å™¨ä¾èµ–
pip3 install flask flask-cors

# å¤åˆ¶ Web æœåŠ¡å™¨æ–‡ä»¶
cp -r web-server ~/autoglm-server/

# å¯åŠ¨ Web æœåŠ¡å™¨
cd ~/autoglm-server/web-server
python3 app.py &
```

### æ­¥éª¤ 8.2ï¼šé…ç½® Nginx åå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰

```bash
# å®‰è£… Nginx
sudo apt install -y nginx

# åˆ›å»ºé…ç½®æ–‡ä»¶
sudo nano /etc/nginx/sites-available/autoglm
```

å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š

```nginx
server {
    listen 80;
    server_name YOUR_DOMAIN_OR_IP;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

**å¯ç”¨é…ç½®**ï¼š

```bash
# åˆ›å»ºè½¯é“¾æŽ¥
sudo ln -s /etc/nginx/sites-available/autoglm /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯ Nginx
sudo systemctl restart nginx
```

**è®¿é—® Web ç•Œé¢**ï¼š
- æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® `http://YOUR_SERVER_IP`
- æ‚¨åº”è¯¥çœ‹åˆ° Open-AutoGLM Web ç•Œé¢

---

## 9. æ•…éšœæŽ’é™¤

### é—®é¢˜ 1ï¼šæ— æ³•è¿žæŽ¥åˆ°æ‰‹æœº

**ç—‡çŠ¶**ï¼š
```
[é”™è¯¯] æ— æ³•è¿žæŽ¥åˆ°æ‰‹æœº: http://100.64.0.2:8080
```

**æŽ’æŸ¥æ­¥éª¤**ï¼š

1. **æ£€æŸ¥æ‰‹æœºä¸Šçš„ AutoGLM Helper æ˜¯å¦è¿è¡Œ**
   ```bash
   # åœ¨æ‰‹æœº Termux ä¸­
   curl http://localhost:8080/status
   ```
   - é¢„æœŸè¾“å‡ºï¼š`{"status":"ok","accessibility_enabled":true}`
   - å¦‚æžœå¤±è´¥ï¼šå¯åŠ¨ AutoGLM Helper APP

2. **æ£€æŸ¥æ— éšœç¢æœåŠ¡æ˜¯å¦å¼€å¯**
   - æ‰‹æœºï¼šè®¾ç½® â†’ è¾…åŠ©åŠŸèƒ½ â†’ å·²ä¸‹è½½çš„æœåŠ¡ â†’ AutoGLM Helper â†’ å¼€å¯

3. **æ£€æŸ¥ Tailscale è¿žæŽ¥**
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Š
   tailscale status

   # åº”è¯¥çœ‹åˆ°æ‰‹æœºè®¾å¤‡
   # ä¾‹å¦‚ï¼š100.64.0.2   android-phone    xiaoke@     linux   -
   ```

   - å¦‚æžœçœ‹ä¸åˆ°æ‰‹æœºï¼šé‡å¯æ‰‹æœºä¸Šçš„ Tailscale APP

4. **æµ‹è¯•ç½‘ç»œè¿žé€šæ€§**
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Š ping æ‰‹æœº
   ping 100.64.0.2

   # æµ‹è¯• HTTP è¿žæŽ¥
   curl -v http://100.64.0.2:8080/status
   ```

### é—®é¢˜ 2ï¼šAPI Key æ— æ•ˆ

**ç—‡çŠ¶**ï¼š
```
[é”™è¯¯] API Key æœªé…ç½®æˆ–æ— æ•ˆ
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. **æ£€æŸ¥é…ç½®æ–‡ä»¶**
   ```bash
   cat ~/autoglm-server/config.env | grep PHONE_AGENT_API_KEY
   ```

   - ç¡®ä¿ä¸æ˜¯ `your_api_key_here`
   - ç¡®ä¿æ ¼å¼æ­£ç¡®ï¼ˆæ— å¤šä½™ç©ºæ ¼ã€å¼•å·ï¼‰

2. **éªŒè¯ API Key**
   - ç™»å½• GRS AI å®˜ç½‘ï¼Œæ£€æŸ¥ API Key æ˜¯å¦æœ‰æ•ˆ
   - æ£€æŸ¥ API Key çš„é…é¢å’Œæƒé™

3. **é‡æ–°åŠ è½½é…ç½®**
   ```bash
   source ~/autoglm-server/config.env
   echo $PHONE_AGENT_API_KEY  # åº”æ˜¾ç¤ºæ‚¨çš„ API Key
   ```

### é—®é¢˜ 3ï¼šéƒ¨ç½²è„šæœ¬å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
deploy-mac.sh: line 42: brew: command not found
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

éƒ¨ç½²è„šæœ¬æ˜¯ä¸º macOS è®¾è®¡çš„ï¼Œä½†å¯ä»¥è·³è¿‡ Homebrew æ£€æŸ¥ï¼š

1. **æ‰‹åŠ¨å®‰è£…ä¾èµ–**
   ```bash
   # Ubuntu/Debian
   sudo apt install -y python3 python3-pip python3-venv git

   # åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
   python3 -m venv ~/autoglm-server/venv
   source ~/autoglm-server/venv/bin/activate

   # å®‰è£… Python ä¾èµ–
   pip install pillow requests
   ```

2. **å…‹éš† Open-AutoGLM**
   ```bash
   cd ~/autoglm-server
   git clone https://github.com/zai-org/Open-AutoGLM.git
   ```

3. **æ‰‹åŠ¨åˆ›å»ºé…ç½®æ–‡ä»¶**
   ```bash
   cat > ~/autoglm-server/config.env << 'EOF'
   export PHONE_AGENT_API_KEY="your_api_key_here"
   export PHONE_HELPER_URL="http://100.64.0.2:8080"
   export LOG_LEVEL="INFO"
   EOF
   ```

### é—®é¢˜ 4ï¼šfrp è¿žæŽ¥å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
frpc: dial tcp YOUR_SERVER_IP:7000: connection refused
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. **æ£€æŸ¥ frp æœåŠ¡ç«¯æ˜¯å¦è¿è¡Œ**
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Š
   ps aux | grep frps

   # å¦‚æžœæ²¡æœ‰è¿è¡Œï¼Œé‡æ–°å¯åŠ¨
   cd ~/autoglm-server/frp_0.52.3_linux_amd64
   ./frps -c frps.toml &
   ```

2. **æ£€æŸ¥é˜²ç«å¢™è§„åˆ™**
   - ç¡®ä¿è…¾è®¯äº‘é˜²ç«å¢™å·²å¼€æ”¾ 7000 ç«¯å£
   - æ£€æŸ¥æœåŠ¡å™¨æœ¬åœ°é˜²ç«å¢™ï¼š
     ```bash
     sudo ufw status
     # å¦‚æžœå¯ç”¨äº†ï¼Œå¼€æ”¾ç«¯å£
     sudo ufw allow 7000/tcp
     ```

3. **æ£€æŸ¥é…ç½®æ–‡ä»¶**
   ```bash
   # æœåŠ¡å™¨ç«¯
   cat ~/autoglm-server/frp_0.52.3_linux_amd64/frps.toml

   # æ‰‹æœºç«¯
   cat ~/frp_0.52.3_linux_arm64/frpc.toml
   ```

### é—®é¢˜ 5ï¼šæœåŠ¡å¯åŠ¨åŽæ— å“åº”

**ç—‡çŠ¶**ï¼š
æœåŠ¡å¯åŠ¨æˆåŠŸï¼Œä½†æ— æ³•æ‰§è¡Œä»»åŠ¡

**æŽ’æŸ¥æ­¥éª¤**ï¼š

1. **æŸ¥çœ‹æ—¥å¿—**
   ```bash
   # å¦‚æžœä½¿ç”¨ systemd
   sudo journalctl -u autoglm.service -f

   # å¦‚æžœæ‰‹åŠ¨å¯åŠ¨
   # æŸ¥çœ‹å¯åŠ¨ç»ˆç«¯çš„è¾“å‡º
   ```

2. **æ£€æŸ¥è¿›ç¨‹**
   ```bash
   ps aux | grep python
   ```

3. **æµ‹è¯•åŸºç¡€åŠŸèƒ½**
   ```bash
   # æµ‹è¯•æˆªå›¾
   curl http://YOUR_PHONE_IP:8080/screenshot

   # æµ‹è¯•ç‚¹å‡»
   curl -X POST http://YOUR_PHONE_IP:8080/tap \
     -H "Content-Type: application/json" \
     -d '{"x": 500, "y": 500}'
   ```

### é—®é¢˜ 6ï¼šå†…å­˜ä¸è¶³

**ç—‡çŠ¶**ï¼š
```
MemoryError: Unable to allocate array
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. **å‡çº§æœåŠ¡å™¨é…ç½®**
   - æŽ¨èè‡³å°‘ 2GB å†…å­˜
   - å¦‚æžœä½¿ç”¨å¤§åž‹ AI æ¨¡åž‹ï¼Œå»ºè®® 4GB æˆ–æ›´é«˜

2. **é…ç½® swap äº¤æ¢ç©ºé—´**
   ```bash
   # åˆ›å»º 2GB swap æ–‡ä»¶
   sudo fallocate -l 2G /swapfile
   sudo chmod 600 /swapfile
   sudo mkswap /swapfile
   sudo swapon /swapfile

   # æ°¸ä¹…å¯ç”¨ï¼ˆæ·»åŠ åˆ° /etc/fstabï¼‰
   echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
   ```

3. **ä¼˜åŒ– AI æ¨¡åž‹**
   - ä½¿ç”¨æ›´å°çš„æ¨¡åž‹ï¼ˆå¦‚ gpt-3.5-turbo è€Œéž gpt-4ï¼‰
   - åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ `PHONE_AGENT_MODEL`

---

## 10. æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 10.1 ä½¿ç”¨ CDN åŠ é€Ÿï¼ˆå¯é€‰ï¼‰

å¦‚æžœéœ€è¦åœ¨å¤šä¸ªåœ°åŒºè®¿é—®ï¼Œå¯ä»¥é…ç½®è…¾è®¯äº‘ CDNï¼š

1. å¼€é€šè…¾è®¯äº‘ CDN æœåŠ¡
2. æ·»åŠ åŠ é€ŸåŸŸå
3. é…ç½®å›žæºåœ°å€ä¸ºæ‚¨çš„æœåŠ¡å™¨ IP
4. ä¿®æ”¹ DNS è§£æžï¼Œå°†åŸŸå CNAME åˆ° CDN åŸŸå

### 10.2 æ•°æ®åº“ä¼˜åŒ–ï¼ˆå¦‚æžœä½¿ç”¨ï¼‰

å¦‚æžœæ‚¨æ‰©å±•äº†é¡¹ç›®å¹¶ä½¿ç”¨æ•°æ®åº“ï¼š

1. å®‰è£… Redisï¼ˆç¼“å­˜ï¼‰
   ```bash
   sudo apt install -y redis-server
   sudo systemctl enable redis-server
   ```

2. é…ç½®æ•°æ®åº“è¿žæŽ¥æ± 
3. ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢

### 10.3 æ—¥å¿—ç®¡ç†

```bash
# é…ç½®æ—¥å¿—è½®è½¬
sudo nano /etc/logrotate.d/autoglm

# æ·»åŠ ä»¥ä¸‹å†…å®¹
/home/ubuntu/autoglm-server/logs/*.log {
    daily
    rotate 7
    compress
    delaycompress
    notifempty
    create 0644 ubuntu ubuntu
}
```

---

## 11. å®‰å…¨å»ºè®®

### 11.1 ä½¿ç”¨ SSH å¯†é’¥ç™»å½•

```bash
# åœ¨æœ¬åœ°ç”Ÿæˆ SSH å¯†é’¥å¯¹
ssh-keygen -t rsa -b 4096

# ä¸Šä¼ å…¬é’¥åˆ°æœåŠ¡å™¨
ssh-copy-id ubuntu@YOUR_SERVER_IP

# ç¦ç”¨å¯†ç ç™»å½•ï¼ˆå¯é€‰ï¼‰
sudo nano /etc/ssh/sshd_config
# ä¿®æ”¹ï¼šPasswordAuthentication no
sudo systemctl restart sshd
```

### 11.2 é…ç½®é˜²ç«å¢™

```bash
# å¯ç”¨ UFW é˜²ç«å¢™
sudo ufw enable

# å…è®¸ SSH
sudo ufw allow 22/tcp

# å…è®¸å¿…è¦çš„ç«¯å£
sudo ufw allow 8000/tcp  # Web ç•Œé¢
sudo ufw allow 7000/tcp  # frp æœåŠ¡ç«¯

# æŸ¥çœ‹çŠ¶æ€
sudo ufw status
```

### 11.3 å®šæœŸæ›´æ–°ç³»ç»Ÿ

```bash
# è®¾ç½®è‡ªåŠ¨æ›´æ–°ï¼ˆå¯é€‰ï¼‰
sudo apt install -y unattended-upgrades
sudo dpkg-reconfigure -plow unattended-upgrades
```

---

## 12. æˆæœ¬ä¼°ç®—

**è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ï¼ˆ2æ ¸4GBï¼‰**ï¼š
- æŒ‰æœˆä»˜è´¹ï¼šçº¦ Â¥40-50/æœˆ
- æŒ‰å¹´ä»˜è´¹ï¼šçº¦ Â¥400-500/å¹´ï¼ˆçº¦ 8.5 æŠ˜ï¼‰

**Tailscale æœåŠ¡**ï¼š
- ä¸ªäººç”¨æˆ·ï¼šå…è´¹ï¼ˆæœ€å¤š 100 å°è®¾å¤‡ï¼‰
- å›¢é˜Ÿç”¨æˆ·ï¼šæŒ‰éœ€ä»˜è´¹

**GRS AI API è´¹ç”¨**ï¼ˆæŒ‰ token è®¡è´¹ï¼‰ï¼š
- è§†é¢‘åˆ†æžï¼šçº¦ Â¥0.01-0.05/æ¬¡
- æ–‡æœ¬ç”Ÿæˆï¼šçº¦ Â¥0.001-0.01/æ¬¡
- é¢„è®¡è´¹ç”¨ï¼šçº¦ Â¥10-50/æœˆï¼ˆæ ¹æ®ä½¿ç”¨é‡ï¼‰

**æ€»æˆæœ¬ä¼°ç®—**ï¼šçº¦ Â¥50-100/æœˆ

---

## 13. æ€»ç»“

æ‚¨å·²æˆåŠŸåœ¨è…¾è®¯äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½² Open-AutoGLMï¼

**éƒ¨ç½²æž¶æž„**ï¼š
```
ç”¨æˆ·è¾“å…¥ â†’ è…¾è®¯äº‘æœåŠ¡å™¨ (Open-AutoGLM)
         â†’ GRS AI (è§†è§‰åˆ†æž + ä»»åŠ¡è§„åˆ’)
         â†’ Tailscale/frp è¿žæŽ¥
         â†’ æ‰‹æœº (AutoGLM Helper)
         â†’ æ‰§è¡Œæ“ä½œ
```

**ä¸‹ä¸€æ­¥**ï¼š
- âœ… æµ‹è¯•å„ç§è‡ªåŠ¨åŒ–ä»»åŠ¡
- âœ… é…ç½®å¼€æœºè‡ªå¯ï¼ˆå¦‚éœ€ 24/7 è¿è¡Œï¼‰
- âœ… é…ç½® Web ç•Œé¢ï¼ˆå¦‚éœ€æµè§ˆå™¨è®¿é—®ï¼‰
- âœ… å¤‡ä»½é…ç½®æ–‡ä»¶ï¼ˆ`config.env`ï¼‰
- âœ… ç›‘æŽ§æœåŠ¡å™¨èµ„æºä½¿ç”¨æƒ…å†µ

**ç›¸å…³æ–‡æ¡£**ï¼š
- [Tailscale é…ç½®æŒ‡å—](TAILSCALE_GUIDE.md)
- [frp å†…ç½‘ç©¿é€éƒ¨ç½²](FRP_WEB_DEPLOYMENT.md)
- [Web ç•Œé¢ä½¿ç”¨æ‰‹å†Œ](WEB_USER_MANUAL.md)
- [å¸¸è§é—®é¢˜è§£ç­”](../README.md#å¸¸è§é—®é¢˜)

**æŠ€æœ¯æ”¯æŒ**ï¼š
- GitHub Issues: https://github.com/xiaoke0828/Open-AutoGLM-Hybrid/issues
- æŸ¥çœ‹æ—¥å¿—ï¼š`sudo journalctl -u autoglm.service -f`
- å‚è€ƒæ•…éšœæŽ’é™¤ç« èŠ‚

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ðŸŽ‰
